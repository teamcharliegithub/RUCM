<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" href="https://static.thenounproject.com/png/9259-200.png">
	<title>RUCMv1.3</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow">
    <title>Password Protected Page</title>
    <style>
        html, body {
            margin: 0;
            width: 100%;
            height: 100%;
            font-family: Arial, Helvetica, sans-serif;
        }
        #dialogText {
            color: white;
            background-color: #333333;
        }
        
        #dialogWrap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: table;
            background-color: #EEEEEE;
        }
        
        #dialogWrapCell {
            display: table-cell;
            text-align: center;
            vertical-align: middle;
        }
        
        #mainDialog {
            max-width: 400px;
            margin: 5px;
            border: solid #AAAAAA 1px;
            border-radius: 10px;
            box-shadow: 3px 3px 5px 3px #AAAAAA;
            margin-left: auto;
            margin-right: auto;
            background-color: #FFFFFF;
            overflow: hidden;
            text-align: left;
        }
        #mainDialog > * {
            padding: 10px 30px;
        }
        #passArea {
            padding: 20px 30px;
            background-color: white;
        }
        #passArea > * {
            margin: 5px auto;
        }
        #pass {
            width: 100%;
            height: 40px;
            font-size: 30px;
        }
        
        #messageWrapper {
            float: left;
            vertical-align: middle;
            line-height: 30px;
        }
        
        .notifyText {
            display: none;
        }
        
        #invalidPass {
            color: red;
        }
        
        #success {
            color: green;
        }
        
        #submitPass {
            font-size: 20px;
            border-radius: 5px;
            background-color: #E7E7E7;
            border: solid gray 1px;
            float: right;
            cursor: pointer;
        }
        #contentFrame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        #attribution {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            padding: 10px;
            font-weight: bold;
            font-size: 0.8em;
        }
        #attribution, #attribution a {
            color: #999;
        }
        .error {
            display: none;
            color: red;
        }
    </style>
  </head>
  <body>
    <iframe id="contentFrame" frameBorder="0" allowfullscreen></iframe>
    <div id="dialogWrap">
        <div id="dialogWrapCell">
            <div id="mainDialog">
                <div id="dialogText">RUCMv1.3 Login - Authorized Access Only</div>
                <div id="passArea">
                    <p id="passwordPrompt">Password</p>
                    <input id="pass" type="password" name="pass" autofocus>
                    <div>
                        <span id="messageWrapper">
                            <span id="invalidPass" class="error">Sorry, please try again.</span>
                            <span id="trycatcherror" class="error">Sorry, something went wrong.</span>
                            <span id="success" class="notifyText">Success!</span>
                            &nbsp;
                        </span>
                        <button id="submitPass" type="button">Submit</button>
                        <div style="clear: both;"></div>
                    </div>
                </div>
                <div id="securecontext" class="error">
                    <p>
                        Sorry, but password protection only works over a secure connection. Please load this page via HTTPS.
                    </p>
                </div>
                <div id="nocrypto" class="error">
                    <p>
                        Your web browser appears to be outdated. Please visit this page using a modern browser.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <script>
    (function() {

        var pl = "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";
        
        var submitPass = document.getElementById('submitPass');
        var passEl = document.getElementById('pass');
        var invalidPassEl = document.getElementById('invalidPass');
        var trycatcherror = document.getElementById('trycatcherror');
        var successEl = document.getElementById('success');
        var contentFrame = document.getElementById('contentFrame');
        
        // Sanity checks

        if (pl === "") {
            submitPass.disabled = true;
            passEl.disabled = true;
            alert("This page is meant to be used with the encryption tool. It doesn't work standalone.");
            return;
        }

        if (!isSecureContext) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#securecontext").style.display = "block";
            return;
        }

        if (!crypto.subtle) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#nocrypto").style.display = "block";
            return;
        }
        
        function str2ab(str) {
            var ustr = atob(str);
            var buf = new ArrayBuffer(ustr.length);
            var bufView = new Uint8Array(buf);
            for (var i=0, strLen=ustr.length; i < strLen; i++) {
                bufView[i] = ustr.charCodeAt(i);
            }
            return bufView;
        }

        async function deriveKey(salt, password) {
            const encoder = new TextEncoder()
            const baseKey = await crypto.subtle.importKey(
                'raw',
                encoder.encode(password),
                'PBKDF2',
                false,
                ['deriveKey'],
            )
            return await crypto.subtle.deriveKey(
                { name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },
                baseKey,
                { name: 'AES-GCM', length: 256 },
                true,
                ['decrypt'],
            )
        }
        
        async function doSubmit(evt) {
            submitPass.disabled = true;
            passEl.disabled = true;

            let iv, ciphertext, key;
            
            try {
                var unencodedPl = str2ab(pl);

                const salt = unencodedPl.slice(0, 32)
                iv = unencodedPl.slice(32, 32 + 16)
                ciphertext = unencodedPl.slice(32 + 16)

                key = await deriveKey(salt, passEl.value);
            } catch (e) {
                trycatcherror.style.display = "inline";
                console.error(e);
                return;
            }

            try {
                const decryptedArray = new Uint8Array(
                    await crypto.subtle.decrypt({ name: 'AES-GCM', iv }, key, ciphertext)
                );

                let decrypted = new TextDecoder().decode(decryptedArray);

                if (decrypted === "") throw "No data returned";

                const basestr = '<base href="." target="_top">';
                const anchorfixstr = `
                    <script>
                        Array.from(document.links).forEach((anchor) => {
                            const href = anchor.getAttribute("href");
                            if (href.startsWith("#")) {
                                anchor.addEventListener("click", function(e) {
                                    e.preventDefault();
                                    const targetId = this.getAttribute("href").substring(1);
                                    const targetEl = document.getElementById(targetId);
                                    targetEl.scrollIntoView();
                                });
                            }
                        });
                    <\/script>
                `;
                
                // Set default iframe link targets to _top so all links break out of the iframe
                if (decrypted.includes("<head>")) decrypted = decrypted.replace("<head>", "<head>" + basestr);
                else if (decrypted.includes("<!DOCTYPE html>")) decrypted = decrypted.replace("<!DOCTYPE html>", "<!DOCTYPE html>" + basestr);
                else decrypted = basestr + decrypted;

                // Fix fragment links
                if (decrypted.includes("</body>")) decrypted = decrypted.replace("</body>", anchorfixstr + '</body>');
                else if (decrypted.includes("</html>")) decrypted = decrypted.replace("</html>", anchorfixstr + '</html>');
                else decrypted = decrypted + anchorfixstr;
                
                contentFrame.srcdoc = decrypted;
                
                successEl.style.display = "inline";
                setTimeout(function() {
                    dialogWrap.style.display = "none";
                }, 1000);
            } catch (e) {
                invalidPassEl.style.display = "inline";
                passEl.value = "";
                submitPass.disabled = false;
                passEl.disabled = false;
                console.error(e);
                return;
            }
        }
        
        submitPass.onclick = doSubmit;
        passEl.onkeypress = function(e){
            if (!e) e = window.event;
            var keyCode = e.keyCode || e.which;
            invalidPassEl.style.display = "none";
            if (keyCode == '13'){
              // Enter pressed
              doSubmit();
              return false;
            }
        }
    })();
    </script>
  </body>
</html>
